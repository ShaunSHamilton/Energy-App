(this["webpackJsonpenergy-app"]=this["webpackJsonpenergy-app"]||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a(6),r=a.n(s),i=a(3),l=a(2),o=a(7),d={medium:"",tariff:"",supplier:"",tariffType:"",paymentMethod:"",standingCharge:0,onlineDiscount:0,from:"",dualFuelDiscount:0,annualConsumption:"",annualCost:0,tcr:"",exitFees:0,unitRates:{Standard:0,Day:0,Night:0,Peak:0,__typename:""},tariffEndsOn:"",priceGuaranteedUntil:"",isEconomy7:!0,isSmartPayg:!0,meterGenerationType:"",__typename:""},j={gas:d,electricity:d,__typename:""},u={date:"",usage:{gas:{cost:"",__typename:""},electricity:{cost:0,rates:[{cost:0,name:"",__typename:""}],__typename:""},__typename:""},__typename:""},b={from:"",technicalDetailsDate:"",type:"",smart:!0,canAcceptReadings:!0,__typename:"",readings:[{cumulative:0,register:"",quality:"",readingDate:"",source:"",unit:"",__typename:""}]},m={currency:"",balance:0,pendingBalance:0,inRangeOfSmartInstaller:!0,__typename:""},h={location:"Overview",isDark:!0,name:"Guest",usageData:[u],dailyBudget:{elec:1,gas:1},productDetails:j,meterPoints:[b],account:m},p="setLocation",O="setIsDark",x="setName",f="setUsageData",g="setDailyBudget",v="setProductDetails",y="setMeterPoints",N="setAccount",k=function(e){return e.location},D=function(e){return e.isDark},w=function(e){return e.name},C=function(e){return e.usageData},_=function(e){return e.dailyBudget};var I=Object(o.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case p:return Object(l.a)(Object(l.a)({},e),{},{location:n});case O:return Object(l.a)(Object(l.a)({},e),{},{isDark:n});case x:return Object(l.a)(Object(l.a)({},e),{},{name:n});case f:return Object(l.a)(Object(l.a)({},e),{},{usageData:n});case g:return Object(l.a)(Object(l.a)({},e),{},{dailyBudget:n});case v:return Object(l.a)(Object(l.a)({},e),{},{productDetails:n});case y:return Object(l.a)(Object(l.a)({},e),{},{meterPoints:n});case N:return Object(l.a)(Object(l.a)({},e),{},{account:n});default:return e}})),P=a(4),B=a.n(P),S=a(8),E=a(5);function T(e){return Math.round(100*(e+Number.EPSILON))/100}function G(e,t,a){return T(e/(t*a)*100)}function U(e){return T(e/125*100)}var M=Object(i.b)((function(e){return{usageData:C(e),isDark:D(e),dailyBudget:_(e)}}),null)((function(e){var t,a,c,s=e.openInput,r=e.usageData,i=e.isDark,l=e.dailyBudget,o=T((null===r||void 0===r?void 0:r.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),d=T((null===r||void 0===r?void 0:r.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),j=null!==(t=null===l||void 0===l?void 0:l.elec)&&void 0!==t?t:1,u=null!==(a=null===l||void 0===l?void 0:l.gas)&&void 0!==a?a:1,b=null!==(c=null===r||void 0===r?void 0:r.length)&&void 0!==c?c:1,m=G(o,b,j),h=G(d,b,u),p=G(d+o,b,j+u);return Object(n.jsxs)("div",{className:"main",style:{marginLeft:"300px",marginTop:"43px"},children:[Object(n.jsx)("header",{className:"container",style:{paddingTop:"22px"},children:Object(n.jsx)("h5",{children:Object(n.jsxs)("b",{children:[Object(n.jsx)("i",{className:"fa fa-dashboard"}),Object(n.jsxs)("button",{id:"updateBtn",className:"".concat(i?"dark-button":""),onClick:s,children:[" ","Update Dashboard"]})]})})}),Object(n.jsxs)("div",{className:"row-padding margin-bottom",children:[Object(n.jsx)("div",{className:"quarter",children:Object(n.jsxs)("div",{className:"container red padding-16",children:[Object(n.jsx)("div",{className:"left",children:Object(n.jsx)("i",{className:"fas fa-bolt xxxlarge"})}),Object(n.jsx)("div",{className:"right",children:Object(n.jsx)("h3",{id:"electricity-consumption",children:null!==o&&void 0!==o?o:"~"})}),Object(n.jsx)("div",{className:"clear"}),Object(n.jsx)("h4",{children:"Electricity"})]})}),Object(n.jsx)("div",{className:"quarter",children:Object(n.jsxs)("div",{className:"container blue padding-16",children:[Object(n.jsx)("div",{className:"left",children:Object(n.jsx)("i",{className:"fas fa-fire xxxlarge"})}),Object(n.jsx)("div",{className:"right",children:Object(n.jsx)("h3",{id:"gas-consumption",children:null!==d&&void 0!==d?d:"~"})}),Object(n.jsx)("div",{className:"clear"}),Object(n.jsx)("h4",{children:"Gas"})]})})]}),Object(n.jsx)("div",{className:"panel",children:Object(n.jsxs)("div",{className:"row-padding",style:{margin:"0-16px"},children:[Object(n.jsxs)("div",{className:"third",children:[Object(n.jsx)("h5",{children:"Graph"}),Object(n.jsx)("img",{style:{width:"100%"},alt:"Placeholder"})]}),Object(n.jsxs)("div",{className:"twothird",children:[Object(n.jsx)("h5",{children:"Consumption"}),Object(n.jsx)("table",{className:"table ".concat(i?"dark-striped dark-table":"striped white"),children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("i",{className:"fa fa-bolt text-blue large"})}),Object(n.jsx)("td",{children:"Electricity"}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fa fa-pound-sign"})," ",o]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("i",{className:"fa fa-fire text-red large"})}),Object(n.jsx)("td",{children:"Gas"}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fa fa-pound-sign"})," ",d]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("i",{className:"fa fa-lightbulb text-yellow large"})}),Object(n.jsx)("td",{children:"Combined"}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fa fa-pound-sign"})," ",T(d+o)]})]})]})})]})]})}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("h5",{children:["Budget for Period: ",b," Days"]}),Object(n.jsx)("p",{children:"Electricity Cost"}),Object(n.jsx)("div",{className:"".concat(i?"dark-bar":"grey"),children:Object(n.jsxs)("div",{className:"container center padding ".concat(m>100?"over-budget":"red"),style:{width:"".concat(U(m),"%")},children:[m,"%"]})}),Object(n.jsx)("p",{children:"Gas Cost"}),Object(n.jsx)("div",{className:"".concat(i?"dark-bar":"grey"),children:Object(n.jsxs)("div",{className:"container center padding ".concat(h>100?"over-budget":"blue"),style:{width:"".concat(U(h),"%")},children:[h,"%"]})}),Object(n.jsx)("p",{children:"Combined Cost"}),Object(n.jsx)("div",{className:"".concat(i?"dark-bar":"grey"),children:Object(n.jsxs)("div",{className:"container center padding ".concat(p>100?"over-budget":"green"),style:{width:"".concat(U(p),"%")},children:[p,"%"]})})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"container"}),Object(n.jsx)("div",{className:"container dark-grey padding-16"})]})})),F={setLocation:function(e){return{type:p,payload:e}}},L=Object(i.b)((function(e){return{location:k(e),name:w(e),isDark:D(e)}}),F)((function(e){var t=e.navitems,a=e.close,c=e.name,s=e.setLocation,r=e.location,i=e.isDark;return Object(n.jsxs)("nav",{className:"sidebar collapse animate-left ".concat(i?"dark-nav":"white"),style:{zIndex:3,width:"300px"},id:"mySidebar",children:[Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"container row",children:[Object(n.jsx)("div",{className:"col s1",children:Object(n.jsx)("span",{className:"circle margin-right",children:Object(n.jsx)("i",{className:"fas fa-user"})})}),Object(n.jsxs)("div",{className:"col s10 bar",children:[Object(n.jsxs)("span",{children:["Welcome, ",Object(n.jsx)("strong",{children:c})]}),Object(n.jsx)("br",{})]})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("h5",{children:"Dashboard"})}),Object(n.jsxs)("div",{className:"bar-block",children:[Object(n.jsxs)("button",{className:"bar-item button padding-16 hide-large dark-grey hover-black",onClick:function(){return a()},title:"close menu",children:[Object(n.jsx)("i",{className:"fas fa-remove"}),"\xa0 Close Menu"]}),t.map((function(e,t){var c=e.name,i=e.classes;return Object(n.jsxs)("button",{onClick:function(){s(c),a()},className:"bar-item button ".concat(r===c?"highlight":""),children:[Object(n.jsx)("i",{className:i+"fa-fw padding-right"}),c]},t)}))]})]})})),A={setName:function(e){return{type:x,payload:e}},setProductDetails:function(e){return{type:v,payload:e}},setMeterPoints:function(e){return{type:y,payload:e}},setAccount:function(e){return{type:N,payload:e}},setUsageData:function(e){return{type:f,payload:e}}},R=function(e){var t=e.error,a=Object(c.useState)(!1),s=Object(E.a)(a,2),r=s[0],i=s[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"1em",height:"30px"},children:[Object(n.jsx)("button",{onClick:function(){return i(!r)},style:{marginLeft:"0px",marginRight:"5px"},children:r?"-":"+"}),Object(n.jsx)("p",{style:{height:"30px",margin:"0px"},children:"Full error..."})]}),r&&Object(n.jsx)("p",{children:"".concat(t)})]})},q=Object(i.b)(null,A)((function(e){var t=e.setName,a=e.setProductDetails,s=e.setMeterPoints,r=e.setAccount,i=e.setIsOpenInput,l=e.setUsageData,o=Object(c.useState)(""),d=Object(E.a)(o,2),j=d[0],u=d[1],b=Object(c.useState)({text:"",error:""}),m=Object(E.a)(b,2),h=m[0],p=m[1];return Object(n.jsxs)("form",{id:"input",onSubmit:function(e){return e.preventDefault()},children:[Object(n.jsx)("button",{onClick:function(){return i(!1)},children:"X"}),Object(n.jsx)("h3",{children:h.text}),Object(n.jsx)("label",{htmlFor:"pass",children:"Password"}),Object(n.jsx)("input",{autoComplete:"off",id:"pass",type:"password",onChange:function(e){var t;e.preventDefault(),u(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},value:j,placeholder:"Enter Password..."}),Object(n.jsx)("button",{id:"submitBtn",onClick:function(){return e=j,p({text:"Attempting to verify...",error:""}),void Object(S.a)(B.a.mark((function n(){var c;return B.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://energy-app-api.herokuapp.com/",{method:"POST",mode:"cors",body:JSON.stringify({input:e}),headers:{"Content-Type":"application/json"}});case 3:return n.next=5,n.sent.json();case 5:(c=n.sent).verified&&!c.error?(i(!1),t(c.name),a(c.obj.productDetails),s(c.obj.meterPoints),r(c.obj.account),l(c.obj.usageData)):(t(c.name||"Guest"),p({text:c.text,error:c.error})),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),p({text:"Failed to verify password...",error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))();var e},children:"Submit"}),h.error&&Object(n.jsx)(R,{error:h.error})]})})),J={setIsDark:function(e){return{type:O,payload:e}}},z=Object(i.b)((function(e){return{isDark:D(e)}}),J)((function(e){var t=e.isDark,a=e.setIsDark,c=e.open;return Object(n.jsxs)("div",{className:"bar top black large",style:{zIndex:4},children:[Object(n.jsx)("button",{className:"bar-item button hide-large hover-none hover-text-white",onClick:function(){return c()},children:Object(n.jsx)("i",{className:"fas fa-bars"})}),Object(n.jsx)("button",{onClick:function(){return a(!t)},className:"right button bar-item ".concat(t?"":"lightbulb"),children:Object(n.jsx)("span",{children:Object(n.jsx)("i",{className:"fa fa-lightbulb ".concat(t?"light-off":"light-on")})})})]})}));console.log("production");var W=[{classes:"fa fa-history ",name:"Overview"},{classes:"fas fa-calendar-day ",name:"Today"},{classes:"fas fa-calendar-week ",name:"This Week"},{classes:"fas fa-calendar-alt ",name:"This Month"},{classes:"far fa-calendar-alt ",name:"This Year"},{classes:"fa fa-pound-sign ",name:"Tarrifs"},{classes:"fa fa-history ",name:"Usage"}],X={setUsageData:function(e){return{type:f,payload:e}}},Y=Object(i.b)((function(e){return{isDark:D(e)}}),X)((function(e){var t=e.setUsageData,a=e.isDark,s=Object(c.useState)(!1),r=Object(E.a)(s,2),i=r[0],l=r[1];function o(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");e.style.display="none",t.style.display="none"}Object(c.useEffect)((function(){Object(S.a)(B.a.mark((function e(){var a;return B.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://energy-app-api.herokuapp.com/getData");case 3:return e.next=5,e.sent.json();case 5:a=e.sent,t(null===a||void 0===a?void 0:a.usageData),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);return Object(n.jsxs)("div",{className:"light-grey ".concat(a?"dark-app":""),children:[Object(n.jsx)(z,{open:function(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");"block"===e.style.display?(e.style.display="none",t.style.display="none"):(e.style.display="block",t.style.display="block")}}),Object(n.jsx)(L,{close:o,navitems:W}),Object(n.jsx)(M,{openInput:function(){l(!i)}}),i&&Object(n.jsx)(q,{setIsOpenInput:l}),Object(n.jsx)("div",{className:"overlay hide-large animate-opacity",onClick:function(){return o()},style:{cursor:"pointer"},title:"close side menu",id:"myOverlay"})]})}));a(26);r.a.render(Object(n.jsx)(i.a,{store:I,children:Object(n.jsx)(Y,{})}),document.getElementById("main"))}},[[27,1,2]]]);
//# sourceMappingURL=main.d053eb17.chunk.js.map