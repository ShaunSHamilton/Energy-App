(this["webpackJsonpenergy-app"]=this["webpackJsonpenergy-app"]||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(1),n=a(6),r=a.n(n),i=a(3),l=a(2),o=a(7),d={location:"Overview",isDark:!0,name:"Guest",usageData:[],dailyBudget:{elec:1,gas:1},allData:{account:{},meterPoints:[],productDetails:{},usageData:[]}},j="setLocation",b="setIsDark",u="setName",h="setUsageData",O="setDailyBudget",x="setAllData",m=function(e){return e.location},p=function(e){return e.isDark},f=function(e){return e.name},v=function(e){return e.usageData},g=function(e){return e.dailyBudget};var y=Object(o.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,c=t.payload;switch(a){case j:return Object(l.a)(Object(l.a)({},e),{},{location:c});case b:return Object(l.a)(Object(l.a)({},e),{},{isDark:c});case u:return Object(l.a)(Object(l.a)({},e),{},{name:c});case h:return Object(l.a)(Object(l.a)({},e),{},{usageData:c});case O:return Object(l.a)(Object(l.a)({},e),{},{dailyBudget:c});case x:return Object(l.a)(Object(l.a)({},e),{},{allData:c});default:return e}})),N=a(4),k=a.n(N),D=a(8),w=a(5);function C(e){return Math.round(100*(e+Number.EPSILON))/100}function I(e,t,a){return C(e/(t*a)*100)}function B(e){return C(e/125*100)}var S=Object(i.b)((function(e){return{usageData:v(e),isDark:p(e),dailyBudget:g(e)}}),null)((function(e){var t,a=e.openInput,s=e.usageData,n=e.isDark,r=e.dailyBudget,i=C(null===s||void 0===s?void 0:s.map((function(e){var t,a,c;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(c=a.electricity)||void 0===c?void 0:c.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0)),l=C(null===s||void 0===s?void 0:s.map((function(e){var t,a,c;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(c=a.gas)||void 0===c?void 0:c.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0)),o=null!==(t=s.length)&&void 0!==t?t:1,d=I(i,o,r.elec),j=I(l,o,r.gas),b=I(l+i,o,r.elec+r.gas);return Object(c.jsxs)("div",{className:"main",style:{marginLeft:"300px",marginTop:"43px"},children:[Object(c.jsx)("header",{className:"container",style:{paddingTop:"22px"},children:Object(c.jsx)("h5",{children:Object(c.jsxs)("b",{children:[Object(c.jsx)("i",{className:"fa fa-dashboard"}),Object(c.jsxs)("button",{id:"updateBtn",className:"".concat(n?"dark-button":""),onClick:a,children:[" ","Update Dashboard"]})]})})}),Object(c.jsxs)("div",{className:"row-padding margin-bottom",children:[Object(c.jsx)("div",{className:"quarter",children:Object(c.jsxs)("div",{className:"container red padding-16",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsx)("i",{className:"fas fa-bolt xxxlarge"})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)("h3",{id:"electricity-consumption",children:null!==i&&void 0!==i?i:"~"})}),Object(c.jsx)("div",{className:"clear"}),Object(c.jsx)("h4",{children:"Electricity"})]})}),Object(c.jsx)("div",{className:"quarter",children:Object(c.jsxs)("div",{className:"container blue padding-16",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsx)("i",{className:"fas fa-fire xxxlarge"})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)("h3",{id:"gas-consumption",children:null!==l&&void 0!==l?l:"~"})}),Object(c.jsx)("div",{className:"clear"}),Object(c.jsx)("h4",{children:"Gas"})]})})]}),Object(c.jsx)("div",{className:"panel",children:Object(c.jsxs)("div",{className:"row-padding",style:{margin:"0-16px"},children:[Object(c.jsxs)("div",{className:"third",children:[Object(c.jsx)("h5",{children:"Graph"}),Object(c.jsx)("img",{style:{width:"100%"},alt:"Placeholder"})]}),Object(c.jsxs)("div",{className:"twothird",children:[Object(c.jsx)("h5",{children:"Consumption"}),Object(c.jsx)("table",{className:"table ".concat(n?"dark-striped dark-table":"striped white"),children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("i",{className:"fa fa-bolt text-blue large"})}),Object(c.jsx)("td",{children:"Electricity"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("i",{className:"fa fa-pound-sign"})," ",i]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("i",{className:"fa fa-fire text-red large"})}),Object(c.jsx)("td",{children:"Gas"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("i",{className:"fa fa-pound-sign"})," ",l]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("i",{className:"fa fa-lightbulb text-yellow large"})}),Object(c.jsx)("td",{children:"Combined"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("i",{className:"fa fa-pound-sign"})," ",C(l+i)]})]})]})})]})]})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("h5",{children:["Budget for Period: ",o," Days"]}),Object(c.jsx)("p",{children:"Electricity Cost"}),Object(c.jsx)("div",{className:"".concat(n?"dark-bar":"grey"),children:Object(c.jsxs)("div",{className:"container center padding ".concat(d>100?"over-budget":"red"),style:{width:"".concat(B(d),"%")},children:[d,"%"]})}),Object(c.jsx)("p",{children:"Gas Cost"}),Object(c.jsx)("div",{className:"".concat(n?"dark-bar":"grey"),children:Object(c.jsxs)("div",{className:"container center padding ".concat(j>100?"over-budget":"blue"),style:{width:"".concat(B(j),"%")},children:[j,"%"]})}),Object(c.jsx)("p",{children:"Combined Cost"}),Object(c.jsx)("div",{className:"".concat(n?"dark-bar":"grey"),children:Object(c.jsxs)("div",{className:"container center padding ".concat(b>100?"over-budget":"green"),style:{width:"".concat(B(b),"%")},children:[b,"%"]})})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"container"}),Object(c.jsx)("div",{className:"container dark-grey padding-16"})]})})),E={setLocation:function(e){return{type:j,payload:e}}},T=Object(i.b)((function(e){return{location:m(e),name:f(e),isDark:p(e)}}),E)((function(e){var t=e.navitems,a=e.close,s=e.name,n=e.setLocation,r=e.location,i=e.isDark;return Object(c.jsxs)("nav",{className:"sidebar collapse animate-left ".concat(i?"dark-nav":"white"),style:{zIndex:"3",width:"300px"},id:"mySidebar",children:[Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"container row",children:[Object(c.jsx)("div",{className:"col s1",children:Object(c.jsx)("span",{className:"circle margin-right",children:Object(c.jsx)("i",{className:"fas fa-user"})})}),Object(c.jsxs)("div",{className:"col s10 bar",children:[Object(c.jsxs)("span",{children:["Welcome, ",Object(c.jsx)("strong",{children:s})]}),Object(c.jsx)("br",{})]})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("h5",{children:"Dashboard"})}),Object(c.jsxs)("div",{className:"bar-block",children:[Object(c.jsxs)("button",{href:"#",className:"bar-item button padding-16 hide-large dark-grey hover-black",onClick:function(){return a()},title:"close menu",children:[Object(c.jsx)("i",{className:"fas fa-remove"}),"\xa0 Close Menu"]}),t.map((function(e,t){var s=e.name,i=e.classes;return Object(c.jsxs)("button",{onClick:function(){n(s),a()},className:"bar-item button ".concat(r===s?"highlight":""),children:[Object(c.jsx)("i",{className:i+"fa-fw padding-right"}),s]},t)}))]})]})})),P={setName:function(e){return{type:u,payload:e}},setAllData:function(e){return{type:x,payload:e}},setUsageData:function(e){return{type:h,payload:e}}},U=function(e){var t=e.error,a=Object(s.useState)(!1),n=Object(w.a)(a,2),r=n[0],i=n[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"1em",height:"30px"},children:[Object(c.jsx)("button",{onClick:function(){return i(!r)},style:{marginLeft:"0px",marginRight:"5px"},children:r?"-":"+"}),Object(c.jsx)("p",{style:{height:"30px",margin:"0px"},children:"Full error..."})]}),r&&Object(c.jsx)("p",{children:"".concat(t)})]})},G=Object(i.b)(null,P)((function(e){e.closeInput;var t=e.setName,a=e.setAllData,n=e.setIsOpenInput,r=e.setUsageData,i=Object(s.useState)(""),l=Object(w.a)(i,2),o=l[0],d=l[1],j=Object(s.useState)({text:"",error:""}),b=Object(w.a)(j,2),u=b[0],h=b[1];return Object(c.jsxs)("form",{id:"input",onSubmit:function(e){return e.preventDefault()},children:[Object(c.jsx)("button",{onClick:function(){return n(!1)},children:"X"}),Object(c.jsx)("h3",{children:u.text}),Object(c.jsx)("label",{htmlFor:"pass",children:"Password"}),Object(c.jsx)("input",{autoComplete:"off",id:"pass",type:"password",onChange:function(e){var t;e.preventDefault(),d(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},value:o,placeholder:"Enter Password..."}),Object(c.jsx)("button",{id:"submitBtn",onClick:function(){return e=o,h({text:"Attempting to verify...",error:""}),void Object(D.a)(k.a.mark((function c(){var s;return k.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("https://energy-app-api.herokuapp.com/",{method:"POST",mode:"cors",body:JSON.stringify({input:e}),headers:{"Content-Type":"application/json"}});case 3:return c.next=5,c.sent.json();case 5:(s=c.sent).verified&&!s.error?(n(!1),t(s.name),a(s.obj),r(s.obj.usageData)):(t(s.name||"Guest"),h({text:s.text,error:s.error})),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(0),console.error(c.t0),h({text:"Failed to verify password...",error:c.t0});case 13:case"end":return c.stop()}}),c,null,[[0,9]])})))();var e},children:"Submit"}),u.error&&Object(c.jsx)(U,{error:u.error})]})})),L={setIsDark:function(e){return{type:b,payload:e}}},A=Object(i.b)((function(e){return{isDark:p(e)}}),L)((function(e){var t=e.isDark,a=e.setIsDark,s=e.open;return Object(c.jsxs)("div",{className:"bar top black large",style:{zIndex:"4"},children:[Object(c.jsx)("button",{className:"bar-item button hide-large hover-none hover-text-white",onClick:function(){return s()},children:Object(c.jsx)("i",{className:"fas fa-bars"})}),Object(c.jsx)("button",{onClick:function(){return a(!t)},className:"right button bar-item ".concat(t?"":"lightbulb"),children:Object(c.jsx)("span",{children:Object(c.jsx)("i",{className:"fa fa-lightbulb ".concat(t?"light-off":"light-on")})})})]})})),F=[{classes:"fa fa-history ",name:"Overview"},{classes:"fas fa-calendar-day ",name:"Today"},{classes:"fas fa-calendar-week ",name:"This Week"},{classes:"fas fa-calendar-alt ",name:"This Month"},{classes:"far fa-calendar-alt ",name:"This Year"},{classes:"fa fa-pound-sign ",name:"Tarrifs"},{classes:"fa fa-history ",name:"Usage"}],J={setUsageData:function(e){return{type:h,payload:e}}},M=Object(i.b)((function(e){return{isDark:p(e)}}),J)((function(e){var t=e.setUsageData,a=e.isDark,n=Object(s.useState)(!1),r=Object(w.a)(n,2),i=r[0],l=r[1];function o(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");e.style.display="none",t.style.display="none"}Object(s.useEffect)(Object(D.a)(k.a.mark((function e(){var a,c;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://energy-app-api.herokuapp.com/getData");case 3:return a=e.sent,e.next=6,a.json();case 6:c=e.sent,t(null===c||void 0===c?void 0:c.usageData),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),[]);return Object(c.jsxs)("div",{className:"light-grey ".concat(a?"dark-app":""),children:[Object(c.jsx)(A,{open:function(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");"block"===e.style.display?(e.style.display="none",t.style.display="none"):(e.style.display="block",t.style.display="block")}}),Object(c.jsx)(T,{close:o,navitems:F}),Object(c.jsx)(S,{openInput:function(){l(!i)}}),i&&Object(c.jsx)(G,{setIsOpenInput:l}),Object(c.jsx)("div",{className:"overlay hide-large animate-opacity",onClick:function(){return o()},style:{cursor:"pointer"},title:"close side menu",id:"myOverlay"})]})}));a(26);r.a.render(Object(c.jsx)(i.a,{store:y,children:Object(c.jsx)(M,{})}),document.getElementById("main"))}},[[27,1,2]]]);
//# sourceMappingURL=main.4f409887.chunk.js.map