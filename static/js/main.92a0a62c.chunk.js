(this["webpackJsonpenergy-app"]=this["webpackJsonpenergy-app"]||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n,c=a(0),s=a(1),r=a(6),i=a.n(r),l=a(3),o=a(2),d=a(7);!function(e){e.setLocation="setLocation",e.setIsDark="setIsDark",e.setName="setName",e.setDateCounter="setDateCounter",e.setSelectedDate="setSelectedDate",e.setUsageData="setUsageData",e.setDailyBudget="setDailyBudget",e.setProductDetails="setProductDetails",e.setMeterPoints="setMeterPoints",e.setAccount="setAccount"}(n||(n={}));var u={medium:"",tariff:"",supplier:"",tariffType:"",paymentMethod:"",standingCharge:0,onlineDiscount:0,from:"",dualFuelDiscount:0,annualConsumption:"",annualCost:0,tcr:"",exitFees:0,unitRates:{Standard:0,Day:0,Night:0,Peak:0,__typename:""},tariffEndsOn:"",priceGuaranteedUntil:"",isEconomy7:!0,isSmartPayg:!0,meterGenerationType:"",__typename:""},j={gas:u,electricity:u,__typename:""},b={date:"",usage:{gas:{cost:"",__typename:""},electricity:{cost:0,rates:[{cost:0,name:"",__typename:""}],__typename:""},__typename:""},__typename:""},v={from:"",technicalDetailsDate:"",type:"",smart:!0,canAcceptReadings:!0,__typename:"",readings:[{cumulative:0,register:"",quality:"",readingDate:"",source:"",unit:"",__typename:""}]},m={currency:"",balance:0,pendingBalance:0,inRangeOfSmartInstaller:!0,__typename:""},p={location:"Overview",isDark:!0,name:"Guest",dateCounter:0,selectedDate:null,usageData:[b],dailyBudget:{elec:1,gas:1},productDetails:j,meterPoints:[v],account:m},O=function(e){return e.location},h=function(e){return e.isDark},f=function(e){return e.name},x=function(e){return e.dateCounter},g=function(e){return e.selectedDate},y=function(e){return e.usageData},N=function(e){return e.dailyBudget};var D=Object(d.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case n.setLocation:return Object(o.a)(Object(o.a)({},e),{},{location:t.payload});case n.setIsDark:return Object(o.a)(Object(o.a)({},e),{},{isDark:t.payload});case n.setName:return Object(o.a)(Object(o.a)({},e),{},{name:t.payload});case n.setDateCounter:return Object(o.a)(Object(o.a)({},e),{},{dateCounter:t.payload});case n.setSelectedDate:return Object(o.a)(Object(o.a)({},e),{},{selectedDate:t.payload});case n.setUsageData:return Object(o.a)(Object(o.a)({},e),{},{usageData:t.payload});case n.setDailyBudget:return Object(o.a)(Object(o.a)({},e),{},{dailyBudget:t.payload});case n.setProductDetails:return Object(o.a)(Object(o.a)({},e),{},{productDetails:t.payload});case n.setMeterPoints:return Object(o.a)(Object(o.a)({},e),{},{meterPoints:t.payload});case n.setAccount:return Object(o.a)(Object(o.a)({},e),{},{account:t.payload});default:return e}})),k=a(5),C=a.n(k),w=a(8),S=a(4);function P(e){return Math.round(100*(e+Number.EPSILON))/100}function I(e,t,a){return P(e/(t*a)*100)}function _(e){return P(e/125*100)}var B={setSelectedDate:function(e){return{type:n.setSelectedDate,payload:e}}},T={electricity:void 0,gas:void 0,date:null},E=Object(l.b)((function(e){return{usageData:y(e),isDark:h(e),dailyBudget:N(e),location:O(e),dateCounter:x(e)}}),B)((function(e){var t=e.openInput,a=e.usageData,n=e.isDark,r=e.dailyBudget,i=e.location,l=e.dateCounter,o=e.setSelectedDate,d=Object(s.useState)(T),u=Object(S.a)(d,2),j=u[0],b=u[1],v=Object(s.useState)(1),m=Object(S.a)(v,2),p=m[0],O=m[1],h=Object(s.useState)(1),f=Object(S.a)(h,2),x=f[0],g=f[1],y=Object(s.useState)(1),N=Object(S.a)(y,2),D=N[0],k=N[1],C=Object(s.useState)(1),w=Object(S.a)(C,2),B=w[0],E=w[1];Object(s.useEffect)((function(){var e;switch(i){case"Overview":b(function(e){var t=P((null===e||void 0===e?void 0:e.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0);return{gas:P((null===e||void 0===e?void 0:e.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),electricity:t,date:null}}(a)),O(null!==(e=null===a||void 0===a?void 0:a.length)&&void 0!==e?e:1);break;case"Today":b(function(e,t){var a,n,c,s,r=null===e||void 0===e?void 0:e[t];return{gas:P(Number(null===r||void 0===r||null===(a=r.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))||void 0,electricity:P(Number(null===r||void 0===r||null===(c=r.usage)||void 0===c||null===(s=c.electricity)||void 0===s?void 0:s.cost))||void 0,date:(null===r||void 0===r?void 0:r.date)||null}}(a,l)),O(1);break;case"This Week":b(function(e){var t,a,n=P((null===e||void 0===e||null===(t=e.slice(-7))||void 0===t?void 0:t.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0);return{gas:P((null===e||void 0===e||null===(a=e.slice(-7))||void 0===a?void 0:a.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),electricity:n,date:null}}(a)),O(7);break;case"This Month":b(function(e){var t,a,n=P((null===e||void 0===e||null===(t=e.slice(-30))||void 0===t?void 0:t.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0);return{gas:P((null===e||void 0===e||null===(a=e.slice(-30))||void 0===a?void 0:a.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),electricity:n,date:null}}(a)),O(30);break;case"This Year":b(function(e){var t,a,n,c,s=new Date,r=null===e||void 0===e?void 0:e.find((function(e){return e.date===s.toISOString().slice(0,10)}));return{gas:Number(null===r||void 0===r||null===(t=r.usage)||void 0===t||null===(a=t.gas)||void 0===a?void 0:a.cost),electricity:Number(null===r||void 0===r||null===(n=r.usage)||void 0===n||null===(c=n.electricity)||void 0===c?void 0:c.cost),date:null}}(a)),O(365);break;default:b({electricity:0,gas:0,date:null})}}),[i,l]),Object(s.useEffect)((function(){var e,t,a=j.electricity,n=void 0===a?0:a,c=j.gas,s=void 0===c?0:c,i=j.date,l=void 0===i?null:i,d=null!==(e=null===r||void 0===r?void 0:r.elec)&&void 0!==e?e:1,u=null!==(t=null===r||void 0===r?void 0:r.gas)&&void 0!==t?t:1;g(I(n,p,d)),k(I(s,p,u)),E(I(s+n,p,d+u)),o(l)}),[j,p]);var U=j.electricity,M=void 0===U?0:U,L=j.gas,A=void 0===L?0:L;return Object(c.jsxs)("div",{className:"main",style:{marginLeft:"300px",marginTop:"43px"},children:[Object(c.jsx)("header",{className:"container",style:{paddingTop:"22px"},children:Object(c.jsx)("h5",{children:Object(c.jsxs)("b",{children:[Object(c.jsx)("i",{className:"fa fa-dashboard"}),Object(c.jsxs)("button",{id:"updateBtn",className:"".concat(n?"dark-button":""),onClick:t,children:[" ","Update Dashboard"]})]})})}),Object(c.jsxs)("div",{className:"row-padding margin-bottom",children:[Object(c.jsx)("div",{className:"quarter",children:Object(c.jsxs)("div",{className:"container red padding-16",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsx)("i",{className:"fas fa-bolt xxxlarge"})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)("h3",{id:"electricity-consumption",children:M||"~"})}),Object(c.jsx)("div",{className:"clear"}),Object(c.jsx)("h4",{children:"Electricity"})]})}),Object(c.jsx)("div",{className:"quarter",children:Object(c.jsxs)("div",{className:"container blue padding-16",children:[Object(c.jsx)("div",{className:"left",children:Object(c.jsx)("i",{className:"fas fa-fire xxxlarge"})}),Object(c.jsx)("div",{className:"right",children:Object(c.jsx)("h3",{id:"gas-consumption",children:A||"~"})}),Object(c.jsx)("div",{className:"clear"}),Object(c.jsx)("h4",{children:"Gas"})]})})]}),Object(c.jsx)("div",{className:"panel",children:Object(c.jsxs)("div",{className:"row-padding",style:{margin:"0-16px"},children:[Object(c.jsxs)("div",{className:"third",children:[Object(c.jsx)("h5",{children:"Graph"}),Object(c.jsx)("img",{style:{width:"100%"},alt:"Placeholder"})]}),Object(c.jsxs)("div",{className:"twothird",children:[Object(c.jsx)("h5",{children:"Consumption"}),Object(c.jsx)("table",{className:"table ".concat(n?"dark-striped dark-table":"striped white"),children:Object(c.jsxs)("tbody",{children:[Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("i",{className:"fa fa-bolt text-blue large"})}),Object(c.jsx)("td",{children:"Electricity"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("i",{className:"fa fa-pound-sign"})," ",M]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("i",{className:"fa fa-fire text-red large"})}),Object(c.jsx)("td",{children:"Gas"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("i",{className:"fa fa-pound-sign"})," ",A]})]}),Object(c.jsxs)("tr",{children:[Object(c.jsx)("td",{children:Object(c.jsx)("i",{className:"fa fa-lightbulb text-yellow large"})}),Object(c.jsx)("td",{children:"Combined"}),Object(c.jsxs)("td",{children:[Object(c.jsx)("i",{className:"fa fa-pound-sign"})," ",P(A+M)]})]})]})})]})]})}),Object(c.jsx)("hr",{}),Object(c.jsxs)("div",{className:"container",children:[Object(c.jsxs)("h5",{children:["Budget for Period: ",p," Days"]}),Object(c.jsx)("p",{children:"Electricity Cost"}),Object(c.jsx)("div",{className:"".concat(n?"dark-bar":"grey"),children:Object(c.jsxs)("div",{className:"container center padding ".concat(x>100?"over-budget-elec":"red"),style:{width:"".concat(_(x),"%")},children:[x,"%"]})}),Object(c.jsx)("p",{children:"Gas Cost"}),Object(c.jsx)("div",{className:"".concat(n?"dark-bar":"grey"),children:Object(c.jsxs)("div",{className:"container center padding ".concat(D>100?"over-budget-gas":"blue"),style:{width:"".concat(_(D),"%")},children:[D,"%"]})}),Object(c.jsx)("p",{children:"Combined Cost"}),Object(c.jsx)("div",{className:"".concat(n?"dark-bar":"grey"),children:Object(c.jsxs)("div",{className:"container center padding ".concat(B>100?"over-budget-comb":"green"),style:{width:"".concat(_(B),"%")},children:[B,"%"]})})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"container"}),Object(c.jsx)("div",{className:"container dark-grey padding-16"})]})})),U={setLocation:function(e){return{type:n.setLocation,payload:e}}},M=Object(l.b)((function(e){return{location:O(e),name:f(e),isDark:h(e)}}),U)((function(e){var t=e.navitems,a=e.close,n=e.name,s=e.setLocation,r=e.location,i=e.isDark;return Object(c.jsxs)("nav",{className:"sidebar collapse animate-left ".concat(i?"dark-nav":"white"),style:{zIndex:3,width:"300px"},id:"mySidebar",children:[Object(c.jsx)("br",{}),Object(c.jsxs)("div",{className:"container row",children:[Object(c.jsx)("div",{className:"col s1",children:Object(c.jsx)("span",{className:"circle margin-right",children:Object(c.jsx)("i",{className:"fas fa-user"})})}),Object(c.jsxs)("div",{className:"col s10 bar",children:[Object(c.jsxs)("span",{children:["Welcome, ",Object(c.jsx)("strong",{children:n})]}),Object(c.jsx)("br",{})]})]}),Object(c.jsx)("hr",{}),Object(c.jsx)("div",{className:"container",children:Object(c.jsx)("h5",{children:"Dashboard"})}),Object(c.jsxs)("div",{className:"bar-block",children:[Object(c.jsxs)("button",{className:"bar-item button padding-16 hide-large dark-grey hover-black",onClick:function(){return a()},title:"close menu",children:[Object(c.jsx)("i",{className:"fas fa-remove"}),"\xa0 Close Menu"]}),t.map((function(e,t){var n=e.name,i=e.classes;return Object(c.jsxs)("button",{onClick:function(){s(n),a()},className:"bar-item button ".concat(r===n?"highlight":""),children:[Object(c.jsx)("i",{className:i+"fa-fw padding-right"}),n]},t)}))]})]})})),L={setName:function(e){return{type:n.setName,payload:e}},setProductDetails:function(e){return{type:n.setProductDetails,payload:e}},setMeterPoints:function(e){return{type:n.setMeterPoints,payload:e}},setAccount:function(e){return{type:n.setAccount,payload:e}},setUsageData:function(e){return{type:n.setUsageData,payload:e}}},A=function(e){var t=e.error,a=Object(s.useState)(!1),n=Object(S.a)(a,2),r=n[0],i=n[1];return Object(c.jsxs)(c.Fragment,{children:[Object(c.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"1em",height:"30px"},children:[Object(c.jsx)("button",{onClick:function(){return i(!r)},style:{marginLeft:"0px",marginRight:"5px"},children:r?"-":"+"}),Object(c.jsx)("p",{style:{height:"30px",margin:"0px"},children:"Full error..."})]}),r&&Object(c.jsx)("p",{children:"".concat(t)})]})},G=Object(l.b)(null,L)((function(e){var t=e.setName,a=e.setProductDetails,n=e.setMeterPoints,r=e.setAccount,i=e.setIsOpenInput,l=e.setUsageData,o=Object(s.useState)(""),d=Object(S.a)(o,2),u=d[0],j=d[1],b=Object(s.useState)({text:"",error:""}),v=Object(S.a)(b,2),m=v[0],p=v[1];return Object(c.jsxs)("form",{id:"input",onSubmit:function(e){return e.preventDefault()},children:[Object(c.jsx)("button",{onClick:function(){return i(!1)},children:"X"}),Object(c.jsx)("h3",{children:m.text}),Object(c.jsx)("label",{htmlFor:"pass",children:"Password"}),Object(c.jsx)("input",{autoComplete:"off",id:"pass",type:"password",onChange:function(e){var t;e.preventDefault(),j(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},value:u,placeholder:"Enter Password..."}),Object(c.jsx)("button",{id:"submitBtn",onClick:function(){return e=u,p({text:"Attempting to verify...",error:""}),void Object(w.a)(C.a.mark((function c(){var s;return C.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.prev=0,c.next=3,fetch("https://energy-app-api.herokuapp.com/",{method:"POST",mode:"cors",body:JSON.stringify({input:e}),headers:{"Content-Type":"application/json"}});case 3:return c.next=5,c.sent.json();case 5:(s=c.sent).verified&&!s.error?(i(!1),t(s.name),a(s.obj.productDetails),n(s.obj.meterPoints),r(s.obj.account),l(s.obj.usageData)):(t(s.name||"Guest"),p({text:s.text,error:s.error})),c.next=13;break;case 9:c.prev=9,c.t0=c.catch(0),console.error(c.t0),p({text:"Failed to verify password...",error:c.t0});case 13:case"end":return c.stop()}}),c,null,[[0,9]])})))();var e},children:"Submit"}),m.error&&Object(c.jsx)(A,{error:m.error})]})})),F={setIsDark:function(e){return{type:n.setIsDark,payload:e}},setDateCounter:function(e){return{type:n.setDateCounter,payload:e}}},R=Object(l.b)((function(e){return{isDark:h(e),dateCounter:x(e),selectedDate:g(e),usageData:y(e)}}),F)((function(e){var t=e.isDark,a=e.setIsDark,n=e.open,s=e.setDateCounter,r=e.selectedDate,i=e.dateCounter,l=e.usageData,o=function(e){s(0===i&&e<0?0:i===l.length-1&&e>0?i:i+e)};return Object(c.jsxs)("div",{className:"bar top black large",style:{zIndex:4},children:[Object(c.jsx)("button",{className:"bar-item button hide-large hover-none hover-text-white",onClick:function(){return n()},children:Object(c.jsx)("i",{className:"fas fa-bars"})}),r&&Object(c.jsxs)("div",{id:"date-selector",className:"bar-item padding-0",children:[Object(c.jsx)("button",{className:"button",onClick:function(){return o(-1)},children:Object(c.jsx)("span",{children:Object(c.jsx)("i",{className:"fas fa-arrow-left"})})}),r,Object(c.jsx)("button",{className:"button",onClick:function(){return o(1)},children:Object(c.jsx)("span",{children:Object(c.jsx)("i",{className:"fas fa-arrow-right"})})})]}),Object(c.jsx)("button",{onClick:function(){return a(!t)},className:"right button bar-item ".concat(t?"":"lightbulb"),children:Object(c.jsx)("span",{children:Object(c.jsx)("i",{className:"fa fa-lightbulb ".concat(t?"light-off":"light-on")})})})]})}));console.log("production");var q=[{classes:"fa fa-history ",name:"Overview"},{classes:"fas fa-calendar-day ",name:"Today"},{classes:"fas fa-calendar-week ",name:"This Week"},{classes:"fas fa-calendar-alt ",name:"This Month"},{classes:"far fa-calendar-alt ",name:"This Year"},{classes:"fa fa-pound-sign ",name:"Tarrifs"},{classes:"fa fa-history ",name:"Usage"}],J={setUsageData:function(e){return{type:n.setUsageData,payload:e}}},W=Object(l.b)((function(e){return{isDark:h(e)}}),J)((function(e){var t=e.setUsageData,a=e.isDark,n=Object(s.useState)(!1),r=Object(S.a)(n,2),i=r[0],l=r[1];function o(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");e.style.display="none",t.style.display="none"}Object(s.useEffect)((function(){Object(w.a)(C.a.mark((function e(){var a;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://energy-app-api.herokuapp.com/getData");case 3:return e.next=5,e.sent.json();case 5:a=e.sent,t(null===a||void 0===a?void 0:a.usageData),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);return Object(c.jsxs)("div",{className:"light-grey ".concat(a?"dark-app":""),children:[Object(c.jsx)(R,{open:function(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");"block"===e.style.display?(e.style.display="none",t.style.display="none"):(e.style.display="block",t.style.display="block")}}),Object(c.jsx)(M,{close:o,navitems:q}),Object(c.jsx)(E,{openInput:function(){l(!i)}}),i&&Object(c.jsx)(G,{setIsOpenInput:l}),Object(c.jsx)("div",{className:"overlay hide-large animate-opacity",onClick:function(){return o()},style:{cursor:"pointer"},title:"close side menu",id:"myOverlay"})]})}));a(26);i.a.render(Object(c.jsx)(l.a,{store:D,children:Object(c.jsx)(W,{})}),document.getElementById("main"))}},[[27,1,2]]]);
//# sourceMappingURL=main.92a0a62c.chunk.js.map