(this["webpackJsonpenergy-app"]=this["webpackJsonpenergy-app"]||[]).push([[0],{26:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a(1),s=a(6),r=a.n(s),i=a(3),l=a(2),o=a(7),d={medium:"",tariff:"",supplier:"",tariffType:"",paymentMethod:"",standingCharge:0,onlineDiscount:0,from:"",dualFuelDiscount:0,annualConsumption:"",annualCost:0,tcr:"",exitFees:0,unitRates:{Standard:0,Day:0,Night:0,Peak:0,__typename:""},tariffEndsOn:"",priceGuaranteedUntil:"",isEconomy7:!0,isSmartPayg:!0,meterGenerationType:"",__typename:""},u={gas:d,electricity:d,__typename:""},j={date:"",usage:{gas:{cost:"",__typename:""},electricity:{cost:0,rates:[{cost:0,name:"",__typename:""}],__typename:""},__typename:""},__typename:""},b={from:"",technicalDetailsDate:"",type:"",smart:!0,canAcceptReadings:!0,__typename:"",readings:[{cumulative:0,register:"",quality:"",readingDate:"",source:"",unit:"",__typename:""}]},m={currency:"",balance:0,pendingBalance:0,inRangeOfSmartInstaller:!0,__typename:""},v={location:"Overview",isDark:!0,name:"Guest",usageData:[j],dailyBudget:{elec:1,gas:1},productDetails:u,meterPoints:[b],account:m},h="setLocation",p="setIsDark",O="setName",f="setUsageData",x="setDailyBudget",g="setProductDetails",y="setMeterPoints",N="setAccount",k=function(e){return e.location},D=function(e){return e.isDark},w=function(e){return e.name},C=function(e){return e.usageData},_=function(e){return e.dailyBudget};var I=Object(o.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case h:return Object(l.a)(Object(l.a)({},e),{},{location:n});case p:return Object(l.a)(Object(l.a)({},e),{},{isDark:n});case O:return Object(l.a)(Object(l.a)({},e),{},{name:n});case f:return Object(l.a)(Object(l.a)({},e),{},{usageData:n});case x:return Object(l.a)(Object(l.a)({},e),{},{dailyBudget:n});case g:return Object(l.a)(Object(l.a)({},e),{},{productDetails:n});case y:return Object(l.a)(Object(l.a)({},e),{},{meterPoints:n});case N:return Object(l.a)(Object(l.a)({},e),{},{account:n});default:return e}})),S=a(4),P=a.n(S),T=a(8),B=a(5);function E(e){return Math.round(100*(e+Number.EPSILON))/100}function G(e,t,a){return E(e/(t*a)*100)}function M(e){return E(e/125*100)}var U=Object(i.b)((function(e){return{usageData:C(e),isDark:D(e),dailyBudget:_(e),location:k(e)}}),null)((function(e){var t,a,c,s,r=e.openInput,i=e.usageData,l=e.isDark,o=e.dailyBudget,d=1;switch(e.location){case"Overview":s=function(e){var t=E((null===e||void 0===e?void 0:e.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0);return{gas:E((null===e||void 0===e?void 0:e.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),electricity:t}}(i),d=null!==(t=null===i||void 0===i?void 0:i.length)&&void 0!==t?t:1;break;case"Today":s=function(e){var t,a,n,c,s=new Date,r=null===e||void 0===e?void 0:e.find((function(e){return e.date===s.toISOString().slice(0,10)}));return{gas:Number(null===r||void 0===r||null===(t=r.usage)||void 0===t||null===(a=t.gas)||void 0===a?void 0:a.cost)||void 0,electricity:Number(null===r||void 0===r||null===(n=r.usage)||void 0===n||null===(c=n.electricity)||void 0===c?void 0:c.cost)||void 0}}(i);break;case"This Week":s=function(e){var t,a,n=E((null===e||void 0===e||null===(t=e.slice(-7))||void 0===t?void 0:t.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0);return{gas:E((null===e||void 0===e||null===(a=e.slice(-7))||void 0===a?void 0:a.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),electricity:n}}(i),d=7;break;case"This Month":s=function(e){var t,a,n=E((null===e||void 0===e||null===(t=e.slice(-30))||void 0===t?void 0:t.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.electricity)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0);return{gas:E((null===e||void 0===e||null===(a=e.slice(-30))||void 0===a?void 0:a.map((function(e){var t,a,n;return null!==(t=Number(null===(a=e.usage)||void 0===a||null===(n=a.gas)||void 0===n?void 0:n.cost))&&void 0!==t?t:0})).reduce((function(e,t){return e+t}),0))||0),electricity:n}}(i),d=30;break;case"This Year":s=function(e){var t,a,n,c,s=new Date,r=null===e||void 0===e?void 0:e.find((function(e){return e.date===s.toISOString().slice(0,10)}));return{gas:Number(null===r||void 0===r||null===(t=r.usage)||void 0===t||null===(a=t.gas)||void 0===a?void 0:a.cost),electricity:Number(null===r||void 0===r||null===(n=r.usage)||void 0===n||null===(c=n.electricity)||void 0===c?void 0:c.cost)}}(i),d=365;break;default:s={electricity:0,gas:0}}var u=s,j=u.electricity,b=void 0===j?0:j,m=u.gas,v=void 0===m?0:m,h=null!==(a=null===o||void 0===o?void 0:o.elec)&&void 0!==a?a:1,p=null!==(c=null===o||void 0===o?void 0:o.gas)&&void 0!==c?c:1,O=G(b,d,h),f=G(v,d,p),x=G(v+b,d,h+p);return Object(n.jsxs)("div",{className:"main",style:{marginLeft:"300px",marginTop:"43px"},children:[Object(n.jsx)("header",{className:"container",style:{paddingTop:"22px"},children:Object(n.jsx)("h5",{children:Object(n.jsxs)("b",{children:[Object(n.jsx)("i",{className:"fa fa-dashboard"}),Object(n.jsxs)("button",{id:"updateBtn",className:"".concat(l?"dark-button":""),onClick:r,children:[" ","Update Dashboard"]})]})})}),Object(n.jsxs)("div",{className:"row-padding margin-bottom",children:[Object(n.jsx)("div",{className:"quarter",children:Object(n.jsxs)("div",{className:"container red padding-16",children:[Object(n.jsx)("div",{className:"left",children:Object(n.jsx)("i",{className:"fas fa-bolt xxxlarge"})}),Object(n.jsx)("div",{className:"right",children:Object(n.jsx)("h3",{id:"electricity-consumption",children:b||"~"})}),Object(n.jsx)("div",{className:"clear"}),Object(n.jsx)("h4",{children:"Electricity"})]})}),Object(n.jsx)("div",{className:"quarter",children:Object(n.jsxs)("div",{className:"container blue padding-16",children:[Object(n.jsx)("div",{className:"left",children:Object(n.jsx)("i",{className:"fas fa-fire xxxlarge"})}),Object(n.jsx)("div",{className:"right",children:Object(n.jsx)("h3",{id:"gas-consumption",children:v||"~"})}),Object(n.jsx)("div",{className:"clear"}),Object(n.jsx)("h4",{children:"Gas"})]})})]}),Object(n.jsx)("div",{className:"panel",children:Object(n.jsxs)("div",{className:"row-padding",style:{margin:"0-16px"},children:[Object(n.jsxs)("div",{className:"third",children:[Object(n.jsx)("h5",{children:"Graph"}),Object(n.jsx)("img",{style:{width:"100%"},alt:"Placeholder"})]}),Object(n.jsxs)("div",{className:"twothird",children:[Object(n.jsx)("h5",{children:"Consumption"}),Object(n.jsx)("table",{className:"table ".concat(l?"dark-striped dark-table":"striped white"),children:Object(n.jsxs)("tbody",{children:[Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("i",{className:"fa fa-bolt text-blue large"})}),Object(n.jsx)("td",{children:"Electricity"}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fa fa-pound-sign"})," ",b]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("i",{className:"fa fa-fire text-red large"})}),Object(n.jsx)("td",{children:"Gas"}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fa fa-pound-sign"})," ",v]})]}),Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:Object(n.jsx)("i",{className:"fa fa-lightbulb text-yellow large"})}),Object(n.jsx)("td",{children:"Combined"}),Object(n.jsxs)("td",{children:[Object(n.jsx)("i",{className:"fa fa-pound-sign"})," ",E(v+b)]})]})]})})]})]})}),Object(n.jsx)("hr",{}),Object(n.jsxs)("div",{className:"container",children:[Object(n.jsxs)("h5",{children:["Budget for Period: ",d," Days"]}),Object(n.jsx)("p",{children:"Electricity Cost"}),Object(n.jsx)("div",{className:"".concat(l?"dark-bar":"grey"),children:Object(n.jsxs)("div",{className:"container center padding ".concat(O>100?"over-budget-elec":"red"),style:{width:"".concat(M(O),"%")},children:[O,"%"]})}),Object(n.jsx)("p",{children:"Gas Cost"}),Object(n.jsx)("div",{className:"".concat(l?"dark-bar":"grey"),children:Object(n.jsxs)("div",{className:"container center padding ".concat(f>100?"over-budget-gas":"blue"),style:{width:"".concat(M(f),"%")},children:[f,"%"]})}),Object(n.jsx)("p",{children:"Combined Cost"}),Object(n.jsx)("div",{className:"".concat(l?"dark-bar":"grey"),children:Object(n.jsxs)("div",{className:"container center padding ".concat(x>100?"over-budget-comb":"green"),style:{width:"".concat(M(x),"%")},children:[x,"%"]})})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"container"}),Object(n.jsx)("div",{className:"container dark-grey padding-16"})]})})),F={setLocation:function(e){return{type:h,payload:e}}},L=Object(i.b)((function(e){return{location:k(e),name:w(e),isDark:D(e)}}),F)((function(e){var t=e.navitems,a=e.close,c=e.name,s=e.setLocation,r=e.location,i=e.isDark;return Object(n.jsxs)("nav",{className:"sidebar collapse animate-left ".concat(i?"dark-nav":"white"),style:{zIndex:3,width:"300px"},id:"mySidebar",children:[Object(n.jsx)("br",{}),Object(n.jsxs)("div",{className:"container row",children:[Object(n.jsx)("div",{className:"col s1",children:Object(n.jsx)("span",{className:"circle margin-right",children:Object(n.jsx)("i",{className:"fas fa-user"})})}),Object(n.jsxs)("div",{className:"col s10 bar",children:[Object(n.jsxs)("span",{children:["Welcome, ",Object(n.jsx)("strong",{children:c})]}),Object(n.jsx)("br",{})]})]}),Object(n.jsx)("hr",{}),Object(n.jsx)("div",{className:"container",children:Object(n.jsx)("h5",{children:"Dashboard"})}),Object(n.jsxs)("div",{className:"bar-block",children:[Object(n.jsxs)("button",{className:"bar-item button padding-16 hide-large dark-grey hover-black",onClick:function(){return a()},title:"close menu",children:[Object(n.jsx)("i",{className:"fas fa-remove"}),"\xa0 Close Menu"]}),t.map((function(e,t){var c=e.name,i=e.classes;return Object(n.jsxs)("button",{onClick:function(){s(c),a()},className:"bar-item button ".concat(r===c?"highlight":""),children:[Object(n.jsx)("i",{className:i+"fa-fw padding-right"}),c]},t)}))]})]})})),A={setName:function(e){return{type:O,payload:e}},setProductDetails:function(e){return{type:g,payload:e}},setMeterPoints:function(e){return{type:y,payload:e}},setAccount:function(e){return{type:N,payload:e}},setUsageData:function(e){return{type:f,payload:e}}},R=function(e){var t=e.error,a=Object(c.useState)(!1),s=Object(B.a)(a,2),r=s[0],i=s[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginTop:"1em",height:"30px"},children:[Object(n.jsx)("button",{onClick:function(){return i(!r)},style:{marginLeft:"0px",marginRight:"5px"},children:r?"-":"+"}),Object(n.jsx)("p",{style:{height:"30px",margin:"0px"},children:"Full error..."})]}),r&&Object(n.jsx)("p",{children:"".concat(t)})]})},q=Object(i.b)(null,A)((function(e){var t=e.setName,a=e.setProductDetails,s=e.setMeterPoints,r=e.setAccount,i=e.setIsOpenInput,l=e.setUsageData,o=Object(c.useState)(""),d=Object(B.a)(o,2),u=d[0],j=d[1],b=Object(c.useState)({text:"",error:""}),m=Object(B.a)(b,2),v=m[0],h=m[1];return Object(n.jsxs)("form",{id:"input",onSubmit:function(e){return e.preventDefault()},children:[Object(n.jsx)("button",{onClick:function(){return i(!1)},children:"X"}),Object(n.jsx)("h3",{children:v.text}),Object(n.jsx)("label",{htmlFor:"pass",children:"Password"}),Object(n.jsx)("input",{autoComplete:"off",id:"pass",type:"password",onChange:function(e){var t;e.preventDefault(),j(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)},value:u,placeholder:"Enter Password..."}),Object(n.jsx)("button",{id:"submitBtn",onClick:function(){return e=u,h({text:"Attempting to verify...",error:""}),void Object(T.a)(P.a.mark((function n(){var c;return P.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,fetch("https://energy-app-api.herokuapp.com/",{method:"POST",mode:"cors",body:JSON.stringify({input:e}),headers:{"Content-Type":"application/json"}});case 3:return n.next=5,n.sent.json();case 5:(c=n.sent).verified&&!c.error?(i(!1),t(c.name),a(c.obj.productDetails),s(c.obj.meterPoints),r(c.obj.account),l(c.obj.usageData)):(t(c.name||"Guest"),h({text:c.text,error:c.error})),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0),h({text:"Failed to verify password...",error:n.t0});case 13:case"end":return n.stop()}}),n,null,[[0,9]])})))();var e},children:"Submit"}),v.error&&Object(n.jsx)(R,{error:v.error})]})})),J={setIsDark:function(e){return{type:p,payload:e}}},W=Object(i.b)((function(e){return{isDark:D(e)}}),J)((function(e){var t=e.isDark,a=e.setIsDark,c=e.open;return Object(n.jsxs)("div",{className:"bar top black large",style:{zIndex:4},children:[Object(n.jsx)("button",{className:"bar-item button hide-large hover-none hover-text-white",onClick:function(){return c()},children:Object(n.jsx)("i",{className:"fas fa-bars"})}),Object(n.jsx)("button",{onClick:function(){return a(!t)},className:"right button bar-item ".concat(t?"":"lightbulb"),children:Object(n.jsx)("span",{children:Object(n.jsx)("i",{className:"fa fa-lightbulb ".concat(t?"light-off":"light-on")})})})]})}));console.log("production");var z=[{classes:"fa fa-history ",name:"Overview"},{classes:"fas fa-calendar-day ",name:"Today"},{classes:"fas fa-calendar-week ",name:"This Week"},{classes:"fas fa-calendar-alt ",name:"This Month"},{classes:"far fa-calendar-alt ",name:"This Year"},{classes:"fa fa-pound-sign ",name:"Tarrifs"},{classes:"fa fa-history ",name:"Usage"}],Y={setUsageData:function(e){return{type:f,payload:e}}},X=Object(i.b)((function(e){return{isDark:D(e)}}),Y)((function(e){var t=e.setUsageData,a=e.isDark,s=Object(c.useState)(!1),r=Object(B.a)(s,2),i=r[0],l=r[1];function o(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");e.style.display="none",t.style.display="none"}Object(c.useEffect)((function(){Object(T.a)(P.a.mark((function e(){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://energy-app-api.herokuapp.com/getData");case 3:return e.next=5,e.sent.json();case 5:a=e.sent,t(null===a||void 0===a?void 0:a.usageData),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()}),[]);return Object(n.jsxs)("div",{className:"light-grey ".concat(a?"dark-app":""),children:[Object(n.jsx)(W,{open:function(){var e=document.getElementById("mySidebar"),t=document.getElementById("myOverlay");"block"===e.style.display?(e.style.display="none",t.style.display="none"):(e.style.display="block",t.style.display="block")}}),Object(n.jsx)(L,{close:o,navitems:z}),Object(n.jsx)(U,{openInput:function(){l(!i)}}),i&&Object(n.jsx)(q,{setIsOpenInput:l}),Object(n.jsx)("div",{className:"overlay hide-large animate-opacity",onClick:function(){return o()},style:{cursor:"pointer"},title:"close side menu",id:"myOverlay"})]})}));a(26);r.a.render(Object(n.jsx)(i.a,{store:I,children:Object(n.jsx)(X,{})}),document.getElementById("main"))}},[[27,1,2]]]);
//# sourceMappingURL=main.24ddc74a.chunk.js.map